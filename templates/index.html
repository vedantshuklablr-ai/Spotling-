<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Spotling: AI tool for detecting deceptive social media posts" />
    <title>Spotling</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
  </head>
  <body>
    <div class="skip-link">
      <a href="#main-content">Skip to main content</a>
    </div>

    <header class="header" role="banner">
      <div class="header-content">
        <div class="header-top">
          <h1>ğŸ” Spotling</h1>
          <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark/light mode">ğŸŒ™</button>
        </div>
        <p class="subtitle">
          Analyze imageâ€“caption pairs for potential inconsistencies and deception indicators.
          Spotling uses lightweight heuristics to detect suspicious patterns.
        </p>
      </div>
    </header>

    <main id="main-content" class="main-container">
      <!-- Navigation -->
      <nav class="page-nav">
        <a href="/" class="nav-link active">ğŸ” Analyzer</a>
        <a href="/fraud-alerts" class="nav-link">âš ï¸ Fraud Alerts</a>
        <a href="/marketing-fraud" class="nav-link">ğŸ’° Marketing Fraud</a>
        <a href="/guidelines" class="nav-link">âš–ï¸ Guidelines</a>
        <a href="/helplines" class="nav-link">ğŸ“ Helplines</a>
        <a href="/messages" class="nav-link">ğŸ’¬ Safety Tips</a>
      </nav>

      <section class="panel input-panel" aria-labelledby="input-heading">
        <h2 id="input-heading">Analyze a Social Media Post</h2>
        <form id="analysis-form" enctype="multipart/form-data" novalidate>
          <div class="form-group">
            <label for="media">
              Post Media (Photo / Video)
              <span class="required" aria-label="required">*</span>
            </label>
            <input
              type="file"
              id="media"
              name="media"
              accept="image/*,video/*"
              required
              aria-describedby="media-help"
            />
            <p id="media-help" class="form-help">
              Supported: JPG, PNG, GIF, WebP (images) or MP4, AVI, MOV, WebM (videos)
            </p>
          </div>

          <div class="form-group">
            <label for="link_url">External Link <span class="optional">(optional)</span></label>
            <input
              type="url"
              id="link_url"
              name="link_url"
              placeholder="https://example.com/post..."
              aria-describedby="link-help"
            />
            <p id="link-help" class="form-help">
              If the post references an external link, paste it here.
            </p>
          </div>

          <div class="form-group">
            <label for="caption">
              Caption / Text
              <span class="required" aria-label="required">*</span>
            </label>
            <textarea
              id="caption"
              name="caption"
              rows="5"
              maxlength="5000"
              placeholder="Paste or type the caption from the social media post..."
              required
              aria-describedby="caption-help caption-counter"
            ></textarea>
            <p id="caption-help" class="form-help">
              Copy the exact caption text from the post. Max 5000 characters.
            </p>
            <div id="caption-counter" class="char-counter" aria-live="polite">
              <span id="char-count">0</span> / 5000 characters
            </div>
          </div>

          <button type="submit" class="primary-button" id="submit-btn">
            <span class="button-text">Analyze Post</span>
            <span class="spinner hidden" aria-hidden="true"></span>
          </button>
          <p id="status-message" class="status-message" role="status" aria-live="polite"></p>
        </form>
      </section>

      <section class="panel results-panel" aria-labelledby="results-heading">
        <h2 id="results-heading">Analysis Result</h2>

        <div id="placeholder" class="placeholder-content">
          <div class="placeholder-icon">ğŸ“Š</div>
          <p>
            Upload an image/video and caption to see the
            <strong>deception score</strong> and
            <strong>textâ€“image consistency</strong> here.
          </p>
        </div>

        <div id="results" class="hidden">
          <div class="media-summary">
            <h3>Post Content</h3>
            <p id="media-summary-text" class="media-summary-text">
              Media details will appear here after analysis.
            </p>
            <a
              id="link-summary"
              class="media-link hidden"
              href="#"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="External link from post"
            ></a>
          </div>

          <div class="score-row">
            <div class="score-card">
              <h3>Deception Score</h3>
              <div class="score-value" id="deception-score" aria-label="deception score">0</div>
              <div class="score-bar-container">
                <div
                  id="deception-bar"
                  class="score-bar score-bar-deception"
                  style="width: 0%"
                  role="progressbar"
                  aria-valuenow="0"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
              </div>
              <p class="score-label" id="deception-label"></p>
            </div>

            <div class="score-card">
              <h3>Textâ€“Image Consistency</h3>
              <div class="score-value" id="consistency-score" aria-label="consistency score">0</div>
              <div class="score-bar-container">
                <div
                  id="consistency-bar"
                  class="score-bar score-bar-consistency"
                  style="width: 0%"
                  role="progressbar"
                  aria-valuenow="0"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
              </div>
              <p class="score-label" id="consistency-label"></p>
            </div>
          </div>

          <div class="explanations">
            <h3>Why this result?</h3>
            <ul id="explanations-list" role="list"></ul>
          </div>

          <button type="button" class="secondary-button" id="reset-btn">
            Analyze Another Post
          </button>
        </div>
      </section>
    </main>

    <footer class="footer" role="contentinfo">
      <p>
        ğŸ”¬ <strong>Spotling</strong> â€“ Not a final product. Designed for experimentation with deception detection. Results are based on simple heuristics.
      </p>
      <p style="margin-top: 0.5rem; font-size: 0.75rem;">
        Max file size: 50MB | No files are stored or used for training
      </p>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html>

